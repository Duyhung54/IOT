<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Icon support -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Header / Status -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>Sweet Home</h1>
                <p class="date-display" id="current-date">Saturday, Jan 28</p>
            </div>
            <div class="header-right">
                <div class="status-indicator online">
                    <span class="material-icons-round">wifi</span>
                </div>
                <div class="profile-icon">
                    <span class="material-icons-round">person</span>
                </div>
            </div>
        </header>

        <div class="grid-layout">
            <!-- Weather / Outside Card -->
            <div class="card weather-card">
                <div class="weather-header">
                    <span class="material-icons-round weather-icon">wb_sunny</span>
                    <div class="weather-text">
                        <h3>Clear, night</h3>
                        <p>Home</p>
                    </div>
                    <div class="weather-temp">
                        <span id="temp-outside">--</span> <span class="unit">¬∞C</span>
                    </div>
                </div>
                <div class="forecast-row">
                    <!-- Forecast items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Mini Chart: Inside Temp -->
            <div class="card mini-chart-card">
                <div class="mini-chart-header">
                    <h3>Inside Temp</h3>
                    <span class="badge">Live</span>
                </div>
                <div class="mini-value">
                    <span id="temp-inside-val">--</span> <small>¬∞C</small>
                </div>
                <div class="chart-wrapper-mini">
                    <canvas id="chartInside"></canvas>
                </div>
            </div>

            <!-- Mini Chart: Outside Temp -->
            <div class="card mini-chart-card">
                <div class="mini-chart-header">
                    <h3>Outside Temp</h3>
                    <span class="badge" style="background:#e0f2fe; color:#0284c7;">Log</span>
                </div>
                <div class="mini-value">
                    <span id="temp-outside-val">--</span> <small>¬∞C</small>
                </div>
                <div class="chart-wrapper-mini">
                    <canvas id="chartOutside"></canvas>
                </div>
            </div>

            <!-- Actuator Control Card -->
            <div class="card actuator-control-card">
                <div class="card-header-row">
                    <h3>üè† Actuator Control</h3>
                    <button id="btn-refresh" class="refresh-btn" type="button">
                        <span class="material-icons-round">refresh</span>
                    </button>
                </div>

                <div class="control-row">
                    <label class="control-label">Mode</label>
                    <select id="mode_request" class="control-select">
                        <option value="auto">Auto</option>
                        <option value="manual">Manual</option>
                        <option value="ai">AI</option>
                    </select>
                </div>

                <div class="control-grid">
                    <div class="control-row">
                        <label class="control-label">AC</label>
                        <select id="ac" class="control-select">
                            <option value="0">Off</option>
                            <option value="1">On</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label class="control-label">Fan</label>
                        <select id="fan" class="control-select">
                            <option value="0">Off</option>
                            <option value="1">On</option>
                        </select>
                    </div>
                    <div class="control-row">
                        <label class="control-label">Temp Threshold (¬∞C)</label>
                        <input id="temp_threshold" type="number" step="0.1" class="control-input" />
                    </div>
                </div>

                <div class="control-row">
                    <label class="control-label">AI Instruction (optional)</label>
                    <textarea id="end_user_ai_instruction" class="control-textarea"
                        placeholder="Optional guidance for AI mode"></textarea>
                </div>

                <div class="control-actions">
                    <button id="btn-save" type="button" class="save-btn">Save Settings</button>
                    <span id="status" class="status-text"></span>
                </div>

                <!-- Raw API Response (collapsible) -->
                <details class="api-response">
                    <summary>Raw API Response</summary>
                    <pre id="raw">(empty)</pre>
                </details>
            </div>

        </div> <!-- End Grid -->
    </div>

    <!-- Firebase SDK (modular) -->
    <script type="module" src="/static/js/firebase-integration.js"></script>
    <script src="/static/js/dashboard.js?v=3"></script>
</body>

</html>